React Alliance
========================

A collection of reusable components for React.

Installation
============

`npm install git+ssh://git@gitlab.internal.alliancesoftware.com.au:alliance/alliance-react.git#v1.0.7 --save`

Note that `npm` doesn't correctly write this to your package.json so you need to edit it and prepend `git+` to it.


Components
==========

## RootEventListener / injectEventListeners

This provides you with a convenient method of binding events to your root element rather than manually using `document.addEventListener`. There are two advantages:

1. You don't have to manually bind the events then remove them on unmount.

1. It uses React's event handler and so you can still call `event.stopPropagation` in other event handlers and have it work. The reason this doesn't work with `document.addEventListener` is because React handle's all events from a single listener on `document` as well (it doesn't bind events to each element for performance reasons).

A good use case for this is a 'click outside' event (eg. click outside a dropdown menu or modal to close).

You need to wrap your root element with injectEventListeners which passes a prop name `eventListeners` which you need to add to you component:

```js
import { injectEventListeners } from 'alliance-react';

@injectEventListeners()
class Root extends Component {
    // This is your root component
    render() {
        // All you need to do is add the eventListeners props to your 
        // container, below is just an example of what this might look like
        const {eventListeners} = this.props;
        return (
          <div {...eventListeners}>
            {this.props.children}
          </div>
        );
    }
}
```

It passes `eventListeners` as a prop rather than wrapping you element in a `<div>` to avoid the extra DOM element which makes it easier to add to existing app's without having to worry about potentially needing to style the wrapping `div`.

Then you can use the `RootEventListener` component anywhere in your app.

```js
import { RootEventListener } from 'alliance-react';

// In your component somewhere
export default function MyComponent(props) {
    return (
        <RootEventListener onClick={props.onClick}>
            // This would stop any clicks within the div from trigger someFunction
            <div onClick={e => e.stopPropagation()}>
                ...
            </div>
        </RootEventListener>
    );
}
```

NOTE: This relies on your root element taking up the whole viewport - if your app only resides within subsection of the page this won't be reliable.

## BodyStyle

Use this to apply styles and/or classes to `document.body` without directly manipulating it yourself. When component is unmounted it will remove any styles / classes it was responsible for adding. Nested elements will have classes and styles merged with children taking priority in the case of duplicate styles.

```js
import { BodyStyle } from 'alliance-react';

export default function MyComponent(props) {
    return (
        <BodyStyle className="my-class" style={{backgroundColor: 'red'}}>
            <div>
                <BodyStyle className="inner-class" style={{backgroundColor: 'blue'}}>
                    {props.children}
                </BodyStyle>
            </div>
        </BodyStyle>
        );
}
```

This would result in a body having classes `my-class` and `inner-class` and style `background-color` of `blue`.

## hoverState

A decorator that passes through an `isHovered` prop when the element is hovered. Accepts a configuration object with one option `shallow` (defaults to false). If set to true then if any child component that is hovered and also wrapped in `hoverState` will result in the `isHovered` prop being false in the parent. This allows you to hover on a child element without also having it trigger hover state on the parent.


```js
import { hoverState } from 'alliance-react';

@hoverState()
export default function MyComponent(props) {
    render() {
        const { isHovered } = props;
        return (
            <div>
            { isHovered ? "Hover!" : "No hover!"}
            </div>
            );
            }
    }
}
```
