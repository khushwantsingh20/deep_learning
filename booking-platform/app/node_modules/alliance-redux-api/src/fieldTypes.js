import uid from './uid';
import { Typed } from 'typed-immutable';

/**
 * An ID type which is expected to be an integer > 0. Handles conversion of
 * strings to numbers.
 * @param  {Number|String} value
 * @return {Number}
 */
export const Id = Typed('Id', value => {
    const v = Number(value);
    if (isNaN(v)) {
        return TypeError(`"${value}" is not a number`);
    }
    if (v < 0) {
        return TypeError(`"${value}" is < 0`);
    }

    return v;
});

export const UUIDType = Typed('UUID', value => value || uid.v4());

export const Numeric = Typed('Numeric', value => {
    const v = Number(value);
    if (isNaN(v)) {
        return TypeError(`"${value}" is not a number`);
    }

    return v;
});
