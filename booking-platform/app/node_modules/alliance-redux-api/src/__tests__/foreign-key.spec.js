import Model from '../Model';
import ForeignKeyField from '../ForeignKeyField';

test('foreign key', () => {
    const StaffMember = Model(
        {
            id: Number,
            name: String,
        },
        'staff',
        'Staff Member'
    );
    const Task = Model(
        {
            id: Number,
            name: String,
            staffMemberId: ForeignKeyField(StaffMember),
        },
        'tasks',
        'Task'
    );

    const value = new Task({
        id: 2,
        name: 'Test',
        staffMemberId: new StaffMember({ id: 5, name: 'David' }),
    });

    expect(value.serialize()).toEqual({
        id: 2,
        name: 'Test',
        staffMemberId: 5,
    });

    const value2 = new Task({
        id: 2,
        name: 'Test',
        staffMemberId: 5,
    });

    expect(value2.serialize()).toEqual({
        id: 2,
        name: 'Test',
        staffMemberId: 5,
    });
});
