import * as normalizr from 'normalizr';
import { $modelDefinition } from './Model';

export default function normalize(model, data) {
    let { schema } = model[$modelDefinition];
    const { schemaOptions } = model[$modelDefinition];
    if (Array.isArray(data)) {
        schema = normalizr.arrayOf(schema);
    }
    return normalizr.normalize(data, schema, schemaOptions);
}
