// @flow
import React from 'react';
import moment from 'moment';
import useSettings from '../../hooks/useSettings';

type Props = {
    /**
     * The value to format. Either a string or moment instance.
     */
    value?: string | moment,
    /**
     * The [moment format string](https://momentjs.com/docs/#/displaying/format/) to format date with
     *
     * Defaults to 'MMMM Do YYYY'. See [DjradProvider](/components/DjradProvider/#settings) for
     * where default can be customised globally.
     */
    format?: string,
};

/**
 * Format a date. Accepts either a string or a moment object
 * as the value.
 *
 * @component
 */
export default function DateFormatter(props: Props) {
    const defaultFormat = useSettings({ dateFormat: 'MMMM Do YYYY' }).dateFormat;
    const { value, format = defaultFormat } = props;
    if (value == null) {
        // Forces docgen to pickup component
        return React.createElement(React.Fragment, null);
    }
    return moment(value).format(format);
}
