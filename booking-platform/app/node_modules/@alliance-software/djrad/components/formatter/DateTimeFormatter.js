// @flow
import React from 'react';
import moment from 'moment';
import PropTypes from 'prop-types';
import useSettings from '../../hooks/useSettings';

type Props = {
    /**
     * The value to format. Either a string or moment instance.
     */
    value?: string | moment,
    /**
     * The [moment format string](https://momentjs.com/docs/#/displaying/format/) to format date with.
     *
     * Defaults to 'MMMM Do YYYY, h:mm a'. See [DjradProvider](/components/DjradProvider/#settings) for
     * where default can be customised globally.
     */
    format?: string,
};

/**
 * Format a date time. Acccepts either a string or a moment object
 * as the value.
 */
export default function DateTimeFormatter(props: Props) {
    const defaultFormat = useSettings({ dateTimeFormat: 'MMMM Do YYYY, h:mm a' }).dateTimeFormat;
    const { value, format = defaultFormat } = props;
    if (value == null) {
        // Forces docgen to pickup component
        return React.createElement(React.Fragment, null);
    }
    return moment(value).format(format);
}

DateTimeFormatter.propTypes = {
    format: PropTypes.string,
};
