import React, { useContext, useRef } from 'react';
import { createPortal } from 'react-dom';
import DjradDevToolsContext from './context';

let slotCounter = 0;

export default function Slot({ children }) {
    const { shadowRoot } = useContext(DjradDevToolsContext);
    const idRef = useRef(slotCounter++);
    const slotName = `slot-${idRef.current}`;
    return (
        <slot name={slotName}>
            {createPortal(<span slot={slotName}>{children}</span>, shadowRoot.host)}
        </slot>
    );
}
