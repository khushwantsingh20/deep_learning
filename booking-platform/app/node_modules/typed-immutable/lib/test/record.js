(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define(["exports", "./test", "immutable", "../record", "../typed"], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require("./test"), require("immutable"), require("../record"), require("../typed"));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.test, global.Immutable, global.record, global.typed);
    global.record = mod.exports;
  }
})(this, function (exports, _test, _immutable, _record, _typed) {
  "use strict";

  var Point = (0, _record.Record)({
    x: Number(0),
    y: Number(0)
  }, "Point");

  var PointAndAny = (0, _record.Record)({
    x: Number(0),
    y: Number(0),
    any: _typed.Any
  }, "PointAndAny");

  (0, _test["default"])("reading record short-cirquits", function (assert) {
    var v = Point();
    var reader = (0, _typed.typeOf)(Point);

    assert.equal(reader[_typed.Typed.read](v), v);
  });

  (0, _test["default"])("reading records", function (assert) {
    var reader = (0, _typed.typeOf)(Point);

    var v1 = reader[_typed.Typed.read]();
    var v2 = reader[_typed.Typed.read]({ x: 10 });
    var v3 = reader[_typed.Typed.read]({ y: 10 });
    var v4 = reader[_typed.Typed.read]({ x: 1, y: 2 });

    assert.ok(v1 instanceof _record.Record);
    assert.ok(v2 instanceof _record.Record);
    assert.ok(v3 instanceof _record.Record);
    assert.ok(v4 instanceof _record.Record);

    assert.ok(v1 instanceof Point);
    assert.ok(v2 instanceof Point);
    assert.ok(v3 instanceof Point);
    assert.ok(v4 instanceof Point);

    assert.deepEqual(v1.toJSON(), { x: 0, y: 0 });
    assert.deepEqual(v2.toJSON(), { x: 10, y: 0 });
    assert.deepEqual(v3.toJSON(), { x: 0, y: 10 });
    assert.deepEqual(v4.toJSON(), { x: 1, y: 2 });
  });

  (0, _test["default"])("reading records with TypeError in Any field", function (assert) {
    var reader = (0, _typed.typeOf)(PointAndAny);

    var aTypeError = new TypeError('error message');

    var v1 = reader[_typed.Typed.read]();
    var v2 = reader[_typed.Typed.read]({ x: 10 });
    var v3 = reader[_typed.Typed.read]({ y: 10 });
    var v4 = reader[_typed.Typed.read]({ x: 1, y: 2 });
    var v5 = reader[_typed.Typed.read]({ x: 1, y: 2, any: 'any' });
    var v6 = reader[_typed.Typed.read]({ x: 1, y: 2, any: aTypeError });

    assert.ok(v1 instanceof _record.Record);
    assert.ok(v2 instanceof _record.Record);
    assert.ok(v3 instanceof _record.Record);
    assert.ok(v4 instanceof _record.Record);
    assert.ok(v5 instanceof _record.Record);
    assert.ok(v6 instanceof _record.Record);

    assert.ok(v1 instanceof PointAndAny);
    assert.ok(v2 instanceof PointAndAny);
    assert.ok(v3 instanceof PointAndAny);
    assert.ok(v4 instanceof PointAndAny);
    assert.ok(v5 instanceof PointAndAny);
    assert.ok(v6 instanceof PointAndAny);

    assert.deepEqual(v1.toJSON(), { x: 0, y: 0, any: undefined });
    assert.deepEqual(v2.toJSON(), { x: 10, y: 0, any: undefined });
    assert.deepEqual(v3.toJSON(), { x: 0, y: 10, any: undefined });
    assert.deepEqual(v4.toJSON(), { x: 1, y: 2, any: undefined });
    assert.deepEqual(v5.toJSON(), { x: 1, y: 2, any: 'any' });
    assert.deepEqual(v6.toJSON(), { x: 1, y: 2, any: aTypeError });
  });

  var identity = function identity(x) {
    return x;
  };
  (0, _test["default"])("identical on no change", function (assert) {
    var p1 = Point({ x: 5 });

    assert.equal(p1, p1.set('x', 5));
    assert.equal(p1, p1.merge({ x: 5 }));
    assert.equal(p1, p1.merge({ y: 0 }));
    assert.equal(p1, p1.merge({ x: 5, y: 0 }));
    assert.equal(p1, p1.remove('y'));
    assert.equal(p1, p1.update('x', identity));
    assert.equal(p1, p1.update('y', identity));
  });

  (0, _test["default"])("identical no change in deep updates", function (assert) {
    var Line = (0, _record.Record)({ start: Point, end: Point }, 'Line');

    var l1 = Line({ start: { x: 5 }, end: { x: 7, y: 2 } });

    assert.equal(l1, l1.set('start', l1.start));
    assert.equal(l1, l1.set('end', l1.end));

    assert.equal(l1, l1.merge({ start: l1.start }));
    assert.equal(l1, l1.merge({ end: l1.end }));
    assert.equal(l1, l1.merge({ start: l1.start, end: l1.end }));
    assert.equal(l1, l1.removeIn(['start', 'y']));
    assert.equal(l1, l1.setIn(['start', 'x'], 5));
    assert.equal(l1, l1.setIn(['start', 'x'], 5).setIn(['end', 'x'], 7));
    assert.equal(l1, l1.mergeIn(['start'], { x: 5 }));
    assert.equal(l1, l1.mergeIn(['start'], { x: 5, y: 0 }));
    assert.equal(l1, l1.mergeIn(['start'], { y: 0 }));
    assert.equal(l1, l1.mergeIn(['end'], { y: 2 }));
    assert.equal(l1, l1.mergeIn(['end'], { x: 7 }));
    assert.equal(l1, l1.mergeIn(['end'], { y: 2, x: 7 }));

    assert.equal(l1, l1.update('start', function (p) {
      return p.set('x', 5);
    }));
  });

  (0, _test["default"])('empty record optimization', function (assert) {
    var Point = (0, _record.Record)({ x: 0, y: 0 }, 'Point');

    assert.equal(Point(), Point());
    assert.notEqual(Point({ x: 1 }), Point());
    assert.equal(Point({ x: 1 }).clear(), Point());
    assert.equal(Point({ x: 1 }).clear(), Point({ y: 2 }).clear());
    assert.equal(Point({}), Point());
    assert.notEqual(Point({ z: 3 }), Point());
    assert.ok(Point({ z: 3 }).equals(Point()));
    assert.notEqual(Point({ x: 0 }), Point());
    assert.ok(Point({ x: 0 }).equals(Point()));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZXN0L3JlY29yZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFLQSxNQUFNLEtBQUssR0FBRyxZQUhOLE1BQU0sRUFHTztBQUNuQixLQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNaLEtBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0dBQ2IsRUFBRSxPQUFPLENBQUMsQ0FBQTs7QUFFWCxNQUFNLFdBQVcsR0FBRyxZQVJaLE1BQU0sRUFRYTtBQUN6QixLQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNaLEtBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ1osT0FBRyxTQVZrQixHQUFHLEFBVWhCO0dBQ1QsRUFBRSxhQUFhLENBQUMsQ0FBQTs7QUFFakIsd0JBQUssK0JBQStCLEVBQUUsVUFBQSxNQUFNLEVBQUk7QUFDOUMsUUFBTSxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUE7QUFDakIsUUFBTSxNQUFNLEdBQUcsV0FmRixNQUFNLEVBZUcsS0FBSyxDQUFDLENBQUE7O0FBRTVCLFVBQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE9BakJkLEtBQUssQ0FpQmUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7R0FDdkMsQ0FBQyxDQUFBOztBQUdGLHdCQUFLLGlCQUFpQixFQUFFLFVBQUEsTUFBTSxFQUFJO0FBQ2hDLFFBQU0sTUFBTSxHQUFHLFdBdEJGLE1BQU0sRUFzQkcsS0FBSyxDQUFDLENBQUE7O0FBRTVCLFFBQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxPQXhCWixLQUFLLENBd0JhLElBQUksQ0FBQyxFQUFFLENBQUE7QUFDL0IsUUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLE9BekJaLEtBQUssQ0F5QmEsSUFBSSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLENBQUMsQ0FBQTtBQUNyQyxRQUFNLEVBQUUsR0FB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QVMsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsR0FBRyxFQUFDLFNBQVMsRUFBQyxDQUFDLENBQUE7QUFDdkQsVUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLFNBQVMsRUFBQyxDQUFDLENBQUE7QUFDdkQsVUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsR0FBRyxFQUFDLFNBQVMsRUFBQyxDQUFDLENBQUE7QUFDdEQsVUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsR0FBRyxFQUFDLEtBQUssRUFBQyxDQUFDLENBQUE7QUFDbEQsVUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsR0FBRyxFQUFDLFVBQVUsRUFBQyxDQUFDLENBQUE7R0FDeEQsQ0FBQyxDQUFBOztBQUVGLE1BQU0sUUFBUSxHQUFHLFNBQVgsUUFBUSxDQUFHLENBQUM7V0FBSSxDQUFDO0dBQUEsQ0FBQTtBQUN2Qix3QkFBSyx3QkFBd0IsRUFBRSxVQUFBLE1BQU0sRUFBSTtBQUN2QyxRQUFJLEVBQUUsR0FBRyxLQUFLLENBQUMsRUFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFDLENBQUMsQ0FBQzs7QUFFdkIsVUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNqQyxVQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztBQUNuQyxVQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztBQUNuQyxVQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pDLFVBQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNqQyxVQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQzNDLFVBQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7R0FDNUMsQ0FBQyxDQUFBOztBQUVGLHdCQUFLLHFDQUFxQyxFQUFFLFVBQUEsTUFBTSxFQUFJO0FBQ3BELFFBQUksSUFBSSxHQUFHLFlBOUZMLE1BQU0sRUE4Rk0sRUFBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQTs7QUFFckQsUUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUMsS0FBSyxFQUFFLEVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBQyxFQUFFLEdBQUcsRUFBRSxFQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBQyxFQUFDLENBQUMsQ0FBQTs7QUFFakQsVUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUE7QUFDM0MsVUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7O0FBRXZDLFVBQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBQyxDQUFDLENBQUMsQ0FBQTtBQUM3QyxVQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEVBQUMsQ0FBQyxDQUFDLENBQUE7QUFDekMsVUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxFQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzFELFVBQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQzdDLFVBQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUM3QyxVQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUN4QixLQUFLLENBQUMsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUMzQyxVQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFBO0FBQy9DLFVBQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQTtBQUNyRCxVQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFBO0FBQy9DLFVBQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFDLENBQUMsRUFBRSxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUE7QUFDN0MsVUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQTtBQUM3QyxVQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUE7O0FBRW5ELFVBQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLFVBQUEsQ0FBQzthQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztLQUFBLENBQUMsQ0FBQyxDQUFBO0dBQ3pELENBQUMsQ0FBQTs7QUFHRix3QkFBSywyQkFBMkIsRUFBRSxVQUFBLE1BQU0sRUFBSTtBQUMxQyxRQUFNLEtBQUssR0FBRyxZQXhIUixNQUFNLEVBd0hTLEVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFDLEVBQUUsT0FBTyxDQUFDLENBQUE7O0FBRTNDLFVBQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQTtBQUM5QixVQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFDLENBQUMsRUFBRSxDQUFDLEVBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUE7QUFDdkMsVUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFBO0FBQzVDLFVBQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsS0FBSyxDQUFDLEVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQTtBQUMxRCxVQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFBO0FBQ2hDLFVBQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQTtBQUN2QyxVQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFDLENBQUMsRUFBRSxDQUFDLEVBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUE7QUFDeEMsVUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFBO0FBQ3RDLFVBQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQTtHQUN6QyxDQUFDLENBQUMiLCJmaWxlIjoicmVjb3JkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHRlc3QgZnJvbSBcIi4vdGVzdFwiXG5pbXBvcnQgKiBhcyBJbW11dGFibGUgZnJvbSBcImltbXV0YWJsZVwiXG5pbXBvcnQge1JlY29yZH0gZnJvbSBcIi4uL3JlY29yZFwiXG5pbXBvcnQge1R5cGVkLCB0eXBlT2YsIEFueX0gZnJvbSBcIi4uL3R5cGVkXCJcblxuY29uc3QgUG9pbnQgPSBSZWNvcmQoe1xuICB4OiBOdW1iZXIoMCksXG4gIHk6IE51bWJlcigwKVxufSwgXCJQb2ludFwiKVxuXG5jb25zdCBQb2ludEFuZEFueSA9IFJlY29yZCh7XG4gIHg6IE51bWJlcigwKSxcbiAgeTogTnVtYmVyKDApLFxuICBhbnk6IEFueVxufSwgXCJQb2ludEFuZEFueVwiKVxuXG50ZXN0KFwicmVhZGluZyByZWNvcmQgc2hvcnQtY2lycXVpdHNcIiwgYXNzZXJ0ID0+IHtcbiAgY29uc3QgdiA9IFBvaW50KClcbiAgY29uc3QgcmVhZGVyID0gdHlwZU9mKFBvaW50KVxuXG4gIGFzc2VydC5lcXVhbChyZWFkZXJbVHlwZWQucmVhZF0odiksIHYpXG59KVxuXG5cbnRlc3QoXCJyZWFkaW5nIHJlY29yZHNcIiwgYXNzZXJ0ID0+IHtcbiAgY29uc3QgcmVhZGVyID0gdHlwZU9mKFBvaW50KVxuXG4gIGNvbnN0IHYxID0gcmVhZGVyW1R5cGVkLnJlYWRdKClcbiAgY29uc3QgdjIgPSByZWFkZXJbVHlwZWQucmVhZF0oe3g6MTB9KVxuICBjb25zdCB2MyA9IHJlYWRlcltUeXBlZC5yZWFkXSh7eToxMH0pXG4gIGNvbnN0IHY0ID0gcmVhZGVyW1R5cGVkLnJlYWRdKHt4OjEsIHk6Mn0pXG5cbiAgYXNzZXJ0Lm9rKHYxIGluc3RhbmNlb2YgUmVjb3JkKVxuICBhc3NlcnQub2sodjIgaW5zdGFuY2VvZiBSZWNvcmQpXG4gIGFzc2VydC5vayh2MyBpbnN0YW5jZW9mIFJlY29yZClcbiAgYXNzZXJ0Lm9rKHY0IGluc3RhbmNlb2YgUmVjb3JkKVxuXG4gIGFzc2VydC5vayh2MSBpbnN0YW5jZW9mIFBvaW50KVxuICBhc3NlcnQub2sodjIgaW5zdGFuY2VvZiBQb2ludClcbiAgYXNzZXJ0Lm9rKHYzIGluc3RhbmNlb2YgUG9pbnQpXG4gIGFzc2VydC5vayh2NCBpbnN0YW5jZW9mIFBvaW50KVxuXG4gIGFzc2VydC5kZWVwRXF1YWwodjEudG9KU09OKCksIHt4OjAseTowfSlcbiAgYXNzZXJ0LmRlZXBFcXVhbCh2Mi50b0pTT04oKSwge3g6MTAseTowfSlcbiAgYXNzZXJ0LmRlZXBFcXVhbCh2My50b0pTT04oKSwge3g6MCx5OjEwfSlcbiAgYXNzZXJ0LmRlZXBFcXVhbCh2NC50b0pTT04oKSwge3g6MSx5OjJ9KVxufSlcblxudGVzdChcInJlYWRpbmcgcmVjb3JkcyB3aXRoIFR5cGVFcnJvciBpbiBBbnkgZmllbGRcIiwgYXNzZXJ0ID0+IHtcbiAgY29uc3QgcmVhZGVyID0gdHlwZU9mKFBvaW50QW5kQW55KVxuXG4gIGNvbnN0IGFUeXBlRXJyb3IgPSBuZXcgVHlwZUVycm9yKCdlcnJvciBtZXNzYWdlJylcblxuICBjb25zdCB2MSA9IHJlYWRlcltUeXBlZC5yZWFkXSgpXG4gIGNvbnN0IHYyID0gcmVhZGVyW1R5cGVkLnJlYWRdKHt4OjEwfSlcbiAgY29uc3QgdjMgPSByZWFkZXJbVHlwZWQucmVhZF0oe3k6MTB9KVxuICBjb25zdCB2NCA9IHJlYWRlcltUeXBlZC5yZWFkXSh7eDoxLCB5OjJ9KVxuICBjb25zdCB2NSA9IHJlYWRlcltUeXBlZC5yZWFkXSh7eDoxLCB5OjIsIGFueTogJ2FueSd9KVxuICBjb25zdCB2NiA9IHJlYWRlcltUeXBlZC5yZWFkXSh7eDoxLCB5OjIsIGFueTogYVR5cGVFcnJvcn0pXG5cbiAgYXNzZXJ0Lm9rKHYxIGluc3RhbmNlb2YgUmVjb3JkKVxuICBhc3NlcnQub2sodjIgaW5zdGFuY2VvZiBSZWNvcmQpXG4gIGFzc2VydC5vayh2MyBpbnN0YW5jZW9mIFJlY29yZClcbiAgYXNzZXJ0Lm9rKHY0IGluc3RhbmNlb2YgUmVjb3JkKVxuICBhc3NlcnQub2sodjUgaW5zdGFuY2VvZiBSZWNvcmQpXG4gIGFzc2VydC5vayh2NiBpbnN0YW5jZW9mIFJlY29yZClcblxuICBhc3NlcnQub2sodjEgaW5zdGFuY2VvZiBQb2ludEFuZEFueSlcbiAgYXNzZXJ0Lm9rKHYyIGluc3RhbmNlb2YgUG9pbnRBbmRBbnkpXG4gIGFzc2VydC5vayh2MyBpbnN0YW5jZW9mIFBvaW50QW5kQW55KVxuICBhc3NlcnQub2sodjQgaW5zdGFuY2VvZiBQb2ludEFuZEFueSlcbiAgYXNzZXJ0Lm9rKHY1IGluc3RhbmNlb2YgUG9pbnRBbmRBbnkpXG4gIGFzc2VydC5vayh2NiBpbnN0YW5jZW9mIFBvaW50QW5kQW55KVxuXG4gIGFzc2VydC5kZWVwRXF1YWwodjEudG9KU09OKCksIHt4OjAseTowLGFueTp1bmRlZmluZWR9KVxuICBhc3NlcnQuZGVlcEVxdWFsKHYyLnRvSlNPTigpLCB7eDoxMCx5OjAsYW55OnVuZGVmaW5lZH0pXG4gIGFzc2VydC5kZWVwRXF1YWwodjMudG9KU09OKCksIHt4OjAseToxMCxhbnk6dW5kZWZpbmVkfSlcbiAgYXNzZXJ0LmRlZXBFcXVhbCh2NC50b0pTT04oKSwge3g6MSx5OjIsYW55OnVuZGVmaW5lZH0pXG4gIGFzc2VydC5kZWVwRXF1YWwodjUudG9KU09OKCksIHt4OjEseToyLGFueTonYW55J30pXG4gIGFzc2VydC5kZWVwRXF1YWwodjYudG9KU09OKCksIHt4OjEseToyLGFueTphVHlwZUVycm9yfSlcbn0pXG5cbmNvbnN0IGlkZW50aXR5ID0geCA9PiB4XG50ZXN0KFwiaWRlbnRpY2FsIG9uIG5vIGNoYW5nZVwiLCBhc3NlcnQgPT4ge1xuICB2YXIgcDEgPSBQb2ludCh7eDogNX0pO1xuXG4gIGFzc2VydC5lcXVhbChwMSwgcDEuc2V0KCd4JywgNSkpO1xuICBhc3NlcnQuZXF1YWwocDEsIHAxLm1lcmdlKHt4OiA1fSkpO1xuICBhc3NlcnQuZXF1YWwocDEsIHAxLm1lcmdlKHt5OiAwfSkpO1xuICBhc3NlcnQuZXF1YWwocDEsIHAxLm1lcmdlKHt4OiA1LCB5OiAwfSkpO1xuICBhc3NlcnQuZXF1YWwocDEsIHAxLnJlbW92ZSgneScpKTtcbiAgYXNzZXJ0LmVxdWFsKHAxLCBwMS51cGRhdGUoJ3gnLCBpZGVudGl0eSkpO1xuICBhc3NlcnQuZXF1YWwocDEsIHAxLnVwZGF0ZSgneScsIGlkZW50aXR5KSk7XG59KVxuXG50ZXN0KFwiaWRlbnRpY2FsIG5vIGNoYW5nZSBpbiBkZWVwIHVwZGF0ZXNcIiwgYXNzZXJ0ID0+IHtcbiAgdmFyIExpbmUgPSBSZWNvcmQoe3N0YXJ0OiBQb2ludCwgZW5kOiBQb2ludH0sICdMaW5lJylcblxuICB2YXIgbDEgPSBMaW5lKHtzdGFydDoge3g6IDV9LCBlbmQ6IHt4OiA3LCB5OiAyfX0pXG5cbiAgYXNzZXJ0LmVxdWFsKGwxLCBsMS5zZXQoJ3N0YXJ0JywgbDEuc3RhcnQpKVxuICBhc3NlcnQuZXF1YWwobDEsIGwxLnNldCgnZW5kJywgbDEuZW5kKSlcblxuICBhc3NlcnQuZXF1YWwobDEsIGwxLm1lcmdlKHtzdGFydDogbDEuc3RhcnR9KSlcbiAgYXNzZXJ0LmVxdWFsKGwxLCBsMS5tZXJnZSh7ZW5kOiBsMS5lbmR9KSlcbiAgYXNzZXJ0LmVxdWFsKGwxLCBsMS5tZXJnZSh7c3RhcnQ6IGwxLnN0YXJ0LCBlbmQ6IGwxLmVuZH0pKVxuICBhc3NlcnQuZXF1YWwobDEsIGwxLnJlbW92ZUluKFsnc3RhcnQnLCAneSddKSlcbiAgYXNzZXJ0LmVxdWFsKGwxLCBsMS5zZXRJbihbJ3N0YXJ0JywgJ3gnXSwgNSkpXG4gIGFzc2VydC5lcXVhbChsMSwgbDEuc2V0SW4oWydzdGFydCcsICd4J10sIDUpXG4gICAgICAgICAgICAgICAgICAgICAuc2V0SW4oWydlbmQnLCAneCddLCA3KSlcbiAgYXNzZXJ0LmVxdWFsKGwxLCBsMS5tZXJnZUluKFsnc3RhcnQnXSwge3g6IDV9KSlcbiAgYXNzZXJ0LmVxdWFsKGwxLCBsMS5tZXJnZUluKFsnc3RhcnQnXSwge3g6IDUsIHk6IDB9KSlcbiAgYXNzZXJ0LmVxdWFsKGwxLCBsMS5tZXJnZUluKFsnc3RhcnQnXSwge3k6IDB9KSlcbiAgYXNzZXJ0LmVxdWFsKGwxLCBsMS5tZXJnZUluKFsnZW5kJ10sIHt5OiAyfSkpXG4gIGFzc2VydC5lcXVhbChsMSwgbDEubWVyZ2VJbihbJ2VuZCddLCB7eDogN30pKVxuICBhc3NlcnQuZXF1YWwobDEsIGwxLm1lcmdlSW4oWydlbmQnXSwge3k6IDIsIHg6IDd9KSlcblxuICBhc3NlcnQuZXF1YWwobDEsIGwxLnVwZGF0ZSgnc3RhcnQnLCBwID0+IHAuc2V0KCd4JywgNSkpKVxufSlcblxuXG50ZXN0KCdlbXB0eSByZWNvcmQgb3B0aW1pemF0aW9uJywgYXNzZXJ0ID0+IHtcbiAgY29uc3QgUG9pbnQgPSBSZWNvcmQoe3g6IDAsIHk6IDB9LCAnUG9pbnQnKVxuXG4gIGFzc2VydC5lcXVhbChQb2ludCgpLCBQb2ludCgpKVxuICBhc3NlcnQubm90RXF1YWwoUG9pbnQoe3g6IDF9KSwgUG9pbnQoKSlcbiAgYXNzZXJ0LmVxdWFsKFBvaW50KHt4OiAxfSkuY2xlYXIoKSwgUG9pbnQoKSlcbiAgYXNzZXJ0LmVxdWFsKFBvaW50KHt4OiAxfSkuY2xlYXIoKSwgUG9pbnQoe3k6IDJ9KS5jbGVhcigpKVxuICBhc3NlcnQuZXF1YWwoUG9pbnQoe30pLCBQb2ludCgpKVxuICBhc3NlcnQubm90RXF1YWwoUG9pbnQoe3o6IDN9KSwgUG9pbnQoKSlcbiAgYXNzZXJ0Lm9rKFBvaW50KHt6OiAzfSkuZXF1YWxzKFBvaW50KCkpKVxuICBhc3NlcnQubm90RXF1YWwoUG9pbnQoe3g6MH0pLCBQb2ludCgpKVxuICBhc3NlcnQub2soUG9pbnQoe3g6IDB9KS5lcXVhbHMoUG9pbnQoKSkpXG59KTtcbiJdfQ==